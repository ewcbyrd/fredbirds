(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{25:function(t,e,s){"use strict";var i=s(1),a=s(3),l=s.n(a);function n(t,e,s,i){const{d:a}=t;return[a(e.formattedValue)]}var r=Object(i.registerTemplate)(n);n.stylesheets=[],l.a&&n.stylesheets.push.apply(n.stylesheets,l.a),n.stylesheetTokens={hostAttribute:"my-src-lightning_formattedDateTime-host",shadowAttribute:"my-src-lightning_formattedDateTime"};var o=s(23),d=s(6),c=s(0);class h extends i.LightningElement{constructor(...t){super(...t),this.value=void 0,this.weekday=void 0,this.era=void 0,this.year=void 0,this.month=void 0,this.day=void 0,this.hour=void 0,this.minute=void 0,this.second=void 0,this.timeZoneName=void 0,this.timeZone=void 0,this._hour12=!1,this._hour12Set=!1}get hour12(){return this._hour12}set hour12(t){void 0===t?(this._hour12Set=!1,this._hour12=t):(this._hour12Set=!0,this._hour12=Object(c.w)(t))}get formattedValue(){return this.computeFormattedValue()}computeFormattedValue(){const{value:t}=this;if(!this.isEmpty(t)&&this.isValid(t)){const e=Object(o.a)(this.getOptions()).format(t);if(e)return e}return this.printError(t),""}isEmpty(t){return null==t||""===t}isValid(t){return isFinite(t)||Object(d.d)(t)}printError(t){const e=`<lightning-formatted-date-time> The value attribute accepts either a Date object, a timestamp, or a valid ISO8601 formatted string with timezone offset. but we are getting the ${typeof t} value "${t}" instead.`;console.warn(e)}getOptions(){const t={weekday:this.weekday,era:this.era,year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second,timeZoneName:this.timeZoneName,timeZone:this.timeZone};return this._hour12Set&&(t.hour12=this.hour12),!1!==t.hour12||c.p||(t.hourCycle="h23",delete t.hour12),t}}Object(i.registerDecorators)(h,{publicProps:{value:{config:0},weekday:{config:0},era:{config:0},year:{config:0},month:{config:0},day:{config:0},hour:{config:0},minute:{config:0},second:{config:0},timeZoneName:{config:0},timeZone:{config:0},hour12:{config:3}},track:{_hour12:1,_hour12Set:1}});e.a=Object(i.registerComponent)(h,{tmpl:r})},48:function(t,e,s){"use strict";s.r(e);var i=s(1);var a=[function(t,e,s){return[".state-combobox",e,"{width:150px;margin:auto;text-align:left}.slds-modal__content",e,"{overflow:initial}"].join("")}],l=s(25);var n=[function(t,e,s){return["table",e,"{table-layout:fixed;width:100%}.rare",e,"{color:red;font-weight:700}"].join("")}];function r(t,e,s,a){const{gid:n,h:r,d:o,t:d,k:c,b:h,c:g,i:u}=t,{_m0:p}=a;return[e.sightings?r("div",{classMap:{"slds-size_1-of-1":!0},key:0},[r("article",{classMap:{"slds-split-view":!0,"slds-grid":!0,"slds-grid_vertical":!0,"slds-grow":!0},attrs:{"aria-hidden":"false",id:n("split-view-id")},key:1},[r("header",{classMap:{"slds-split-view__header":!0},key:2},[r("div",{classMap:{"slds-grid":!0,"slds-grid_vertical-align-center":!0,"slds-m-bottom_xx-small":!0},key:3},[r("div",{classMap:{"slds-has-flexi-truncate":!0},key:4},[r("div",{classMap:{"slds-media":!0,"slds-media_center":!0},key:5},[r("div",{classMap:{"slds-media__figure":!0},key:6},[r("div",{classMap:{"slds-icon_container":!0,"slds-icon-standard-forecasts":!0},key:7},[r("svg",{classMap:{"slds-icon":!0},attrs:{"aria-hidden":"true"},key:8},[r("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/standard-sprite/svg/symbols.svg#forecasts")},key:9},[])])])]),r("div",{classMap:{"slds-media__body":!0},key:10},[r("h1",{classMap:{"slds-text-heading_small":!0,"slds-text-color_default":!0,"slds-p-right_x-small":!0},key:11},[r("button",{classMap:{"slds-button":!0,"slds-button_reset":!0,"slds-type-focus":!0,"slds-truncate":!0},attrs:{"aria-haspopup":"true",title:""},key:12},[r("span",{classMap:{"slds-grid":!0,"slds-has-flexi-truncate":!0,"slds-grid_vertical-align-center":!0},key:13},[r("span",{classMap:{"slds-truncate":!0},attrs:{title:e.header},key:14},[o(e.header)])])])])])])])])]),r("div",{classMap:{"slds-grid":!0,"slds-grid_vertical":!0},key:15},[r("div",{classMap:{"slds-split-view__list-header":!0,"slds-grid":!0},key:16},[r("span",{classMap:{"slds-assistive-text":!0},key:17},[d("Sorted by:")]),r("span",{key:18},[d("Date"),r("svg",{classMap:{"slds-icon":!0,"slds-icon_xx-small":!0,"slds-icon-text-default":!0,"slds-align-top":!0},attrs:{"aria-hidden":"true"},key:19},[r("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/utility-sprite/svg/symbols.svg#arrowdown")},key:20},[])])]),r("span",{classMap:{"slds-assistive-text":!0},key:21},[d("- Descending")])]),r("ul",{classMap:{"slds-scrollable_y":!0},styleMap:{height:"450px"},attrs:{"aria-multiselectable":"true",role:"listbox","aria-label":"Select an item to open it in a new workspace tab."},key:22},u(e.sightingList,(function(t){return r("li",{classMap:{"slds-split-view__list-item":!0},attrs:{role:"presentation","data-id":t.id},key:c(23,t.id),on:{click:p||(a._m0=h(e.handleSightingClick))}},[r("a",{classMap:{item:!0,"slds-split-view__list-item-action":!0,"slds-grow":!0,"slds-has-flexi-truncate":!0},attrs:{href:"javascript:void(0);","aria-selected":"false",role:"option","data-id":t.id,tabindex:"0"},key:24},[r("div",{classMap:{"slds-grid":!0,"slds-wrap":!0},key:25},[r("span",{classMap:{"slds-truncate":!0,"slds-text-body_regular":!0,"slds-text-color_default":!0},attrs:{title:t.name},key:26},[o(t.name)]),r("span",{classMap:{"slds-truncate":!0,"slds-col_bump-left":!0},attrs:{title:"Most Recent Observation"},key:27},[g("lightning-formatted-date-time",l.a,{props:{value:t.mostRecent},key:28},[])])]),r("div",{classMap:{"slds-grid":!0,"slds-wrap":!0},key:29},[r("span",{classMap:{"slds-truncate":!0},attrs:{title:t.locations},key:30},[o(t.locations)])])])])})))])])]):null]}var o=Object(i.registerTemplate)(r);r.stylesheets=[],n&&r.stylesheets.push.apply(r.stylesheets,n),r.stylesheetTokens={hostAttribute:"my-my-sightings_sightings-host",shadowAttribute:"my-my-sightings_sightings"};class d extends i.LightningElement{constructor(...t){super(...t),this.sightings=void 0,this.header=void 0,this.viewtype=void 0,this.filter=void 0,this.rarebirds=new Set(JSON.parse(sessionStorage.getItem("rarebirds")).map(t=>t["Scientific Name"]))}get sightingList(){if(!this.sightings||0===this.sightings.length)return[{id:"0",name:"None"}];let t=[];return new Set(this.sightings.map(t=>t.comName)).forEach(e=>{let s=this.sightings.filter(t=>t.comName===e),i="us"===this.viewtype?[...new Set(s.map(t=>`${t.subnational2Name}, ${t.subnational1Name}`))].sort():new Set(s.map(t=>t.subnational2Name));("rare"===this.filter&&this.rarebirds.has(s[0].sciName)||"notable"===this.filter||"all"===this.filter)&&t.push({id:s[0].speciesCode,name:e,locations:"us"===this.viewtype?Array.from(i).join("; "):Array.from(i).join(", "),mostRecent:Math.max(...s.map(t=>new Date(t.obsDt))),scientific:s[0].sciName,class:this.rarebirds.has(s[0].sciName)&&"rare"!==this.filter?"slds-cell-wrap rare":"slds-cell-wrap"})}),t.sort((t,e)=>t.name>e.name?1:-1)}handleSightingClick(t){const e=t.currentTarget.dataset.id,s=this.sightings.filter(t=>t.speciesCode===e);this.dispatchEvent(new CustomEvent("sightingselected",{detail:s}))}get showLocations(){return"nearby"!==this.viewtype}get numSightings(){return void 0===this.sightingList?0:this.sightingList.length}}Object(i.registerDecorators)(d,{publicProps:{sightings:{config:0},header:{config:0},viewtype:{config:0},filter:{config:0},numSightings:{config:1}},fields:["rarebirds"]});var c=Object(i.registerComponent)(d,{tmpl:o});var h=[function(t,e,s){return[".slds-card__footer",e,"{height:250px}"].join("")}],g=s(21);function u(t,e,s,i){const{d:a,h:l,c:n,t:r,k:o,b:d,i:c}=t,{_m0:h}=i;return[e.showSightings?l("article",{classMap:{"slds-card":!0},key:0},[l("div",{classMap:{"slds-card__header":!0,"slds-grid":!0},key:1},[l("header",{classMap:{"slds-media":!0,"slds-media_center":!0,"slds-has-flexi-truncate":!0},key:2},[l("div",{classMap:{"slds-media__body":!0},key:3},[l("h2",{classMap:{"slds-card__header-title":!0},key:4},[l("a",{classMap:{"slds-card__header-link":!0,"slds-truncate":!0},attrs:{href:"#",title:"Accounts"},key:5},[l("span",{key:6},[a(e.header)])]),n("lightning-helptext",g.a,{classMap:{"slds-var-p-left_small":!0},props:{content:"Click on a sighting to see a map for the siting."},key:7},[])])])])]),l("div",{classMap:{"slds-card__body":!0,"slds-card__body_inner":!0},key:8},[l("div",{classMap:{"slds-scrollable--y":!0},styleMap:{"max-height":"450px"},key:9},[l("table",{classMap:{"slds-table":!0,"slds-table_cell-buffer":!0,"slds-table_bordered":!0,"slds-table_col-bordered":!0},key:10},[l("thead",{key:11},[l("tr",{classMap:{"slds-text-heading--label":!0},key:12},[l("th",{attrs:{scope:"col"},key:13},[l("span",{classMap:{"slds-truncate":!0},key:14},[r("Date/Time")])]),l("th",{styleMap:{width:"20rem"},attrs:{scope:"col"},key:15},[l("span",{classMap:{"slds-truncate":!0},key:16},[r("Site Name")])]),e.showLocations?l("th",{attrs:{scope:"col"},key:17},[l("span",{classMap:{"slds-truncate":!0},key:18},[r("Location")])]):null,e.showLocations?l("th",{attrs:{scope:"col"},key:19},[l("span",{classMap:{"slds-truncate":!0},key:20},[r("Sighted By")])]):null,l("th",{attrs:{scope:"col"},key:21},[l("span",{classMap:{"slds-truncate":!0},key:22},[r("Quanitity")])])])]),l("tbody",{key:23},c(e.sightingList,(function(t){return l("tr",{classMap:{"slds-hint-parent":!0},attrs:{"data-id":t.id},key:o(24,t.id),on:{click:h||(i._m0=d(e.handleSightingClick))}},[l("td",{classMap:{"slds-cell-wrap":!0},key:25},[a(t.date)]),l("td",{classMap:{"slds-cell-wrap":!0},key:26},[a(t.location)]),e.showLocations?l("td",{classMap:{"slds-cell-wrap":!0},key:27},[a(t.locality)]):null,e.showLocations?l("td",{classMap:{"slds-cell-wrap":!0},key:28},[a(t.by)]):null,l("td",{classMap:{"slds-cell-wrap":!0},key:29},[a(t.quantity)])])})))])])]),l("footer",{classMap:{"slds-card__footer":!0},key:30},[e.showMap?l("iframe",{styleMap:{border:"0"},attrs:{width:"100%",height:"100%",frameborder:"0",src:e.mapUrl,allowfullscreen:""},key:31},[]):null])]):null]}var p=Object(i.registerTemplate)(u);u.stylesheets=[],h&&u.stylesheets.push.apply(u.stylesheets,h),u.stylesheetTokens={hostAttribute:"my-my-sightingsDetails_sightingsDetails-host",shadowAttribute:"my-my-sightingsDetails_sightingsDetails"};class y extends i.LightningElement{constructor(...t){super(...t),this.sightings=void 0,this.lat=void 0,this.lon=void 0,this.viewtype=void 0}get showSightings(){return void 0!==this.sightings&&this.sightings.length>0}get header(){return`${this.sightings[0].comName} (${this.sightings[0].sciName})`}get sightingList(){let t=[];return this.sightings.forEach(e=>{t.findIndex(t=>t.id===e.obsId)<0&&t.push({id:e.obsId,location:e.locName,locality:void 0===e.subnational2Name?"":`${e.subnational2Name}, ${e.subnational1Name}`,quantity:e.howMany,by:e.userDisplayName,date:e.obsDt})}),t}get mapUrl(){return`https://www.google.com/maps/embed/v1/place?key=AIzaSyCB3Q5szLx_1-UE-WIkFSgA3fFi7-KWFAM&q=${this.lat},${this.lon}&zoom=15`}get showMap(){return this.lat&&this.lon}handleSightingClick(t){const e=t.currentTarget.dataset.id,s=this.sightings.find(t=>t.obsId===e);this.lat=s.lat,this.lon=s.lng}get showLocations(){return"nearby"!==this.viewtype}}Object(i.registerDecorators)(y,{publicProps:{sightings:{config:0},lat:{config:0},lon:{config:0},viewtype:{config:0}}});var m=Object(i.registerComponent)(y,{tmpl:p});var b=[function(t,e,s){return s?":host{display:block}":[t,"{display:block}"].join("")}];function v(t,e,s,i){const{t:a,h:l,d:n,k:r,gid:o,b:d,i:c,f:h}=t,{_m0:g,_m1:u,_m2:p,_m3:y,_m4:m,_m5:b}=i;return[l("fieldset",{key:0},[l("legend",{className:e.computedLegendClass,key:1},[e.required?l("abbr",{classMap:{"slds-required":!0},attrs:{title:e.i18n.required},key:2},[a("*")]):null,n(e.label)]),l("div",{classMap:{"slds-form-element__control":!0},key:3},h([e.isRadio?c(e.transformedOptions,(function(t){return l("span",{classMap:{"slds-radio":!0},key:r(4,t.value)},[l("input",{attrs:{type:"radio",name:e.name,id:o(t.indexId),required:e.required?"":null,disabled:e.disabled?"":null},props:{checked:t.isChecked,value:t.value},key:5,on:{change:g||(i._m0=d(e.handleChange)),focus:u||(i._m1=d(e.handleFocus)),blur:p||(i._m2=d(e.handleBlur))}},[]),l("label",{classMap:{"slds-radio__label":!0},attrs:{for:o(t.indexId)},key:6},[l("span",{classMap:{"slds-radio_faux":!0},key:7},[]),l("span",{classMap:{"slds-form-element__label":!0},key:8},[n(t.label)])])])})):[],e.isButton?l("div",{classMap:{"slds-radio_button-group":!0},key:9},c(e.transformedOptions,(function(t){return l("span",{classMap:{"slds-button":!0,"slds-radio_button":!0},key:r(10,t.value)},[l("input",{attrs:{type:"radio",name:e.name,id:o(t.indexId),required:e.required?"":null,disabled:e.disabled?"":null},props:{checked:t.isChecked,value:t.value},key:11,on:{change:y||(i._m3=d(e.handleChange)),focus:m||(i._m4=d(e.handleFocus)),blur:b||(i._m5=d(e.handleBlur))}},[]),l("label",{classMap:{"slds-radio_button__label":!0},attrs:{for:o(t.indexId)},key:12},[l("span",{classMap:{"slds-radio_faux":!0},key:13},[n(t.label)])])])}))):null])),e._helpMessage?l("div",{classMap:{"slds-form-element__help":!0},attrs:{"data-help-message":"",id:o("help-message")},key:14},[n(e._helpMessage)]):null])]}var _=Object(i.registerTemplate)(v);v.stylesheets=[],b&&v.stylesheets.push.apply(v.stylesheets,b),v.stylesheetTokens={hostAttribute:"my-src-lightning_radioGroup-host",shadowAttribute:"my-src-lightning_radioGroup"};var k=s(24),f=s(0),w=s(22),M=s(4);const S={required:k.a};class C extends i.LightningElement{constructor(...t){super(...t),this.type="radio",this.label=void 0,this.options=void 0,this.messageWhenValueMissing=void 0,this.name=Object(w.e)(),this._required=!1,this._disabled=!1,this._helpMessage=void 0,this._value=void 0}synchronizeA11y(){const t=this.template.querySelectorAll("input");Array.prototype.slice.call(t).forEach(t=>{Object(f.C)(t,{"aria-describedby":this.computedUniqueHelpElementId})})}connectedCallback(){this.classList.add("slds-form-element"),this.updateClassList(),this.interactingState=new w.c,this.interactingState.onleave(this.showHelpMessageIfInvalid.bind(this))}updateClassList(){Object(f.f)(this.classList,{"slds-form-element_stacked":this.variant===w.d.LABEL_STACKED,"slds-form-element_horizontal":this.variant===w.d.LABEL_INLINE})}renderedCallback(){this.synchronizeA11y()}get value(){return this._value}set value(t){this._value=t}get radioButtonElements(){return this.template.querySelectorAll("input")}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(f.w)(t)}get required(){return this._required}set required(t){this._required=Object(f.w)(t)}get variant(){return this._variant||w.d.STANDARD}set variant(t){this._variant=Object(w.h)(t),this.updateClassList()}get i18n(){return S}get transformedOptions(){const{options:t,value:e}=this;return Array.isArray(t)?t.map((t,s)=>({label:t.label,value:t.value,isChecked:e===t.value,indexId:"radio-"+s})):[]}get isRadio(){return"radio"===this.normalizedType}get isButton(){return"button"===this.normalizedType}get normalizedType(){return Object(f.y)(this.type,{fallbackValue:"radio",validValues:["radio","button"]})}get validity(){return this._constraint.validity}checkValidity(){return this._constraint.checkValidity()}reportValidity(){return this._constraint.reportValidity(t=>{this._helpMessage=t})}setCustomValidity(t){this._constraint.setCustomValidity(t)}showHelpMessageIfInvalid(){this.reportValidity()}focus(){const t=this.template.querySelector("input");t&&t.focus()}handleFocus(){this.interactingState.enter(),this.dispatchEvent(new CustomEvent("focus"))}handleBlur(){this.interactingState.leave(),this.dispatchEvent(new CustomEvent("blur"))}handleChange(t){t.stopPropagation(),this.interactingState.interacting();const e=Array.from(this.radioButtonElements).filter(t=>t.checked).map(t=>t.value).toString();this._value=e,this.dispatchEvent(new CustomEvent("change",{detail:{value:e},composed:!0,bubbles:!0,cancelable:!0}))}get computedUniqueHelpElementId(){return Object(f.k)(this.template.querySelector("[data-help-message]"))}get _constraint(){return this._constraintApi||(this._constraintApi=new w.a(()=>this,{valueMissing:()=>!this.disabled&&this.required&&Object(w.g)(this.value)})),this._constraintApi}get computedLegendClass(){return Object(M.a)("slds-form-element__legend slds-form-element__label").add({"slds-assistive-text":this.variant===w.d.LABEL_HIDDEN}).toString()}}C.delegatesFocus=!0,Object(i.registerDecorators)(C,{publicProps:{type:{config:0},label:{config:0},options:{config:0},messageWhenValueMissing:{config:0},name:{config:0},value:{config:3},disabled:{config:3},required:{config:3},variant:{config:3},validity:{config:1}},publicMethods:["checkValidity","reportValidity","setCustomValidity","showHelpMessageIfInvalid","focus"],track:{_required:1,_disabled:1,_helpMessage:1,_value:1}});var O=Object(i.registerComponent)(C,{tmpl:_}),x=s(28);function L(t,e,s,a){const{h:n,t:r,d:o,b:d,fid:h,c:g,gid:u}=t,{_m0:p,_m1:y,_m2:b,_m3:v,_m4:_,_m5:k,_m6:f,_m7:w,_m8:M,_m9:S,_m10:C}=a;return[n("div",{classMap:{"slds-grid":!0,"slds-wrap":!0,"slds-gutters":!0,"slds-var-p-around_medium":!0},key:0},[n("div",{classMap:{"slds-size_1-of-1":!0,"slds-p-left_x-small":!0},key:1},[n("div",{classMap:{"slds-page-header":!0},key:2},[n("div",{classMap:{"slds-page-header__row":!0},key:3},[n("div",{classMap:{"slds-page-header__col-title":!0},key:4},[n("div",{classMap:{"slds-media":!0},key:5},[n("div",{classMap:{"slds-media__figure":!0},key:6},[n("span",{classMap:{"slds-icon_container":!0,"slds-icon-standard-forecasts":!0},key:7},[n("svg",{classMap:{"slds-icon":!0,"slds-page-header__icon":!0},attrs:{"aria-hidden":"true"},key:8},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/standard-sprite/svg/symbols.svg#forecasts")},key:9},[])])])]),n("div",{classMap:{"slds-media__body":!0},key:10},[n("div",{classMap:{"slds-page-header__name":!0},key:11},[n("div",{classMap:{"slds-page-header__name-title":!0},key:12},[n("h1",{key:13},[n("span",{key:14},[r("Sightings")]),n("span",{classMap:{"slds-page-header__title":!0,"slds-truncate":!0},attrs:{title:e.dropdown},key:15},[o(e.dropdown)])])]),n("div",{classMap:{"slds-page-header__name-switcher":!0},key:16},[n("div",{classMap:{"list-select":!0,"slds-dropdown-trigger":!0,"slds-dropdown-trigger_click":!0},key:17},[n("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-button_icon-small":!0},attrs:{"aria-haspopup":"true",title:"Switch list view"},key:18,on:{click:p||(a._m0=d(e.handleListClick))}},[n("svg",{classMap:{"slds-button__icon":!0,"slds-icon_x-small":!0},attrs:{"aria-hidden":"true"},key:19},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/utility-sprite/svg/symbols.svg#down")},key:20},[])]),n("span",{classMap:{"slds-assistive-text":!0},key:21},[r("Switch list view")])]),n("div",{classMap:{"slds-dropdown":!0,"slds-dropdown_left":!0},key:22},[n("ul",{classMap:{"slds-dropdown__list":!0},attrs:{role:"menu","aria-label":"Show More"},key:23},[n("li",{classMap:{"slds-dropdown__item":!0},attrs:{role:"presentation","data-id":"nearby"},key:24,on:{click:y||(a._m1=d(e.handleSightingsChange))}},[n("a",{attrs:{href:h("#"),role:"menuitem",tabindex:"0"},key:25},[n("span",{classMap:{"slds-truncate":!0},attrs:{title:"Menu Item One"},key:26},[r("Nearby")])])]),n("li",{classMap:{"slds-dropdown__item":!0},attrs:{role:"presentation","data-id":"local"},key:27,on:{click:b||(a._m2=d(e.handleSightingsChange))}},[n("a",{attrs:{href:h("#"),role:"menuitem",tabindex:"-1"},key:28},[n("span",{classMap:{"slds-truncate":!0},attrs:{title:"Menu Item Two"},key:29},[r("Local")])])]),n("li",{classMap:{"slds-dropdown__item":!0},attrs:{role:"presentation","data-id":"state"},key:30,on:{click:v||(a._m3=d(e.handleSightingsChange))}},[n("a",{attrs:{href:h("#"),role:"menuitem",tabindex:"-1"},key:31},[n("span",{classMap:{"slds-truncate":!0},attrs:{title:"Menu Item Three"},key:32},[r("State")])])]),n("li",{classMap:{"slds-dropdown__item":!0},attrs:{role:"presentation","data-id":"county"},key:33,on:{click:_||(a._m4=d(e.handleSightingsChange))}},[n("a",{attrs:{href:h("#"),role:"menuitem",tabindex:"-1"},key:34},[n("span",{classMap:{"slds-truncate":!0},attrs:{title:"Menu Item Three"},key:35},[r("County")])])])])])])])])])])]),n("div",{classMap:{"slds-page-header__col-actions":!0},key:36},[n("div",{classMap:{"slds-page-header__controls":!0},key:37},[n("div",{classMap:{"slds-page-header__control":!0},key:38},[])])])]),n("div",{classMap:{"slds-page-header__row":!0},key:39},[n("div",{classMap:{"slds-page-header__col-meta":!0},key:40},[n("p",{classMap:{"slds-page-header__meta-text":!0},key:41},[o(e.numSightings),r(" items â€¢ Updated"),g("lightning-formatted-date-time",l.a,{props:{value:e.lastUpdatedDate,year:"numeric",month:"long",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:"true"},key:42},[])])]),n("div",{classMap:{"slds-page-header__col-controls":!0},key:43},[n("div",{classMap:{"slds-page-header__controls":!0},key:44},[n("div",{classMap:{"slds-page-header__control":!0},key:45},[n("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-button_icon-border-filled":!0},attrs:{title:"Refresh List"},key:46,on:{click:k||(a._m5=d(e.loadSightings))}},[n("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:47},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/utility-sprite/svg/symbols.svg#refresh")},key:48},[])]),n("span",{classMap:{"slds-assistive-text":!0},key:49},[r("Refresh List")])])]),n("div",{classMap:{"slds-page-header__control":!0},key:50},[n("ul",{classMap:{"slds-button-group-list":!0},key:51},[n("li",{key:52},[n("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-button_icon-border-filled":!0},attrs:{title:"Filters"},key:53,on:{click:f||(a._m6=d(e.handleFilterClick))}},[n("svg",{classMap:{"slds-button__icon":!0},attrs:{"aria-hidden":"true"},key:54},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","resources/SLDS/icons/utility-sprite/svg/symbols.svg#filterList")},key:55},[])]),n("span",{classMap:{"slds-assistive-text":!0},key:56},[r("Filters")])])])])])])])])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_1-of-3":!0,"slds-small-size_1-of-1":!0,"slds-p-left_x-small":!0,"slds-var-p-top_small":!0},key:57},[n("div",{key:58},[g("my-sightings",c,{props:{sightings:e.sightings,header:e.sightingsHeader,viewtype:e.setting.view,filter:e.setting.filter},key:59,on:{sightingselected:w||(a._m7=d(e.handleSightingsSelected))}},[])])]),n("div",{classMap:{"slds-col":!0,"slds-large-size_2-of-3":!0,"slds-small-size_1-of-1":!0,"slds-var-p-top_small":!0},key:60},[g("my-sightings-details",m,{props:{sightings:e.selectedSightings,viewtype:e.view},key:61},[])])]),e.showFilterModal?n("section",{classMap:{"slds-modal":!0,"slds-fade-in-open":!0},attrs:{role:"dialog",tabindex:"-1","aria-labelledby":""+u("modal-heading-01"),"aria-modal":"true","aria-describedby":""+u("modal-content-id-1")},key:62},[n("div",{classMap:{"slds-modal__container":!0},key:63},[n("header",{classMap:{"slds-modal__header":!0},key:64},[n("button",{classMap:{"slds-button":!0,"slds-button_icon":!0,"slds-modal__close":!0,"slds-button_icon-inverse":!0},attrs:{title:"Close"},key:65},[n("svg",{classMap:{"slds-button__icon":!0,"slds-button__icon_large":!0},attrs:{"aria-hidden":"true"},key:66},[n("use",{attrs:{"xlink:href":Object(i.sanitizeAttribute)("use","http://www.w3.org/2000/svg","xlink:href","/assets/icons/utility-sprite/svg/symbols.svg#close")},key:67},[])]),n("span",{classMap:{"slds-assistive-text":!0},key:68},[r("Close")])]),n("h1",{classMap:{"slds-modal__title":!0,"slds-hyphenate":!0},attrs:{id:u("modal-heading-01")},key:69},[r("Filter Sightings")])]),n("div",{classMap:{"slds-modal__content":!0,"slds-p-around_medium":!0},attrs:{id:u("modal-content-id-1")},key:70},[n("div",{classMap:{"slds-grid":!0,"slds-gutters_x-small":!0},key:71},[n("div",{classMap:{"slds-size_1-of-3":!0,"slds-col":!0},key:72},[g("lightning-radio-group",O,{classMap:{category:!0},props:{label:"Category",options:e.filterOptions,value:e.setting.filter,type:"radio"},key:73},[])]),n("div",{classMap:{"slds-size_1-of-3":!0,"slds-col":!0},key:74},[g("lightning-combobox",x.a,{classMap:{state:!0},props:{options:e.stateOptions,value:e.setting.state,label:"State",disabled:e.stateSelectDisabled},key:75,on:{change:M||(a._m8=d(e.handleStateChange))}},[])]),n("div",{classMap:{"slds-size_1-of-3":!0,"slds-col":!0},key:76},[g("lightning-combobox",x.a,{classMap:{county:!0},props:{options:e.filteredCounties,value:e.setting.county,label:"County/City",disabled:e.countySelectDisabled},key:77},[])])])]),n("footer",{classMap:{"slds-modal__footer":!0},key:78},[n("button",{classMap:{"slds-button":!0,"slds-button_neutral":!0},key:79,on:{click:S||(a._m9=d(e.handleFilterModalCancelClick))}},[r("Cancel")]),n("button",{classMap:{"slds-button":!0,"slds-button_brand":!0},key:80,on:{click:C||(a._m10=d(e.handleApplyClick))}},[r("Apply")])])])]):null,e.showFilterModal?n("div",{classMap:{"slds-backdrop":!0,"slds-backdrop_open":!0},key:81},[]):null]}var j=Object(i.registerTemplate)(L);L.stylesheets=[],a&&L.stylesheets.push.apply(L.stylesheets,a),L.stylesheetTokens={hostAttribute:"my-my-resources_resources-host",shadowAttribute:"my-my-resources_resources"};var N=s(15),A=s(12);class D extends i.LightningElement{constructor(...t){super(...t),this.localSightings=void 0,this.stateSightings=void 0,this.nearbySightings=void 0,this.countySightings=void 0,this.selectedSightings=[],this.stateOptions=[],this.stateLabel="Virginia",this.countyLabel="Accomack",this.dropdown="Local",this.showFilterModal=!1,this.countyOptions=[],this.setting={view:"local",filter:"notable",back:7,state:"US-VA",county:"US-VA-001"},this.filteredCounties=[],this.lastUpdated={}}connectedCallback(){this.loadSightings(),this.getStateOptions(),this.getCountyOptions()}loadSightings(){this.getLocalSightings(),this.getStateNotableSightings(),navigator.geolocation&&this.getNearbyObservations(),this.getCountyNotableSightings()}get localSightingsHeader(){return`Notable Fredericksburg Region Sightings for the past ${this.setting.back} days`}getLocalSightings(){const t={lat:38.31,long:-77.46,daysBack:this.setting.back};Object(N.c)(t).then(t=>{this.localSightings=t,this.lastUpdated.local=new Date})}getStateNotableSightings(){const t={regionCode:this.setting.state,daysBack:3};Object(N.e)(t).then(t=>{this.stateSightings=t,this.lastUpdated.state=new Date})}getCountyNotableSightings(){const t={regionCode:this.setting.county,daysBack:7};Object(N.e)(t).then(t=>{this.countySightings=t,this.lastUpdated.county=new Date})}getNearbyObservations(){navigator.geolocation.getCurrentPosition(t=>{const e={lat:t.coords.latitude,long:t.coords.longitude};Object(N.d)(e).then(t=>{this.nearbySightings=t,this.lastUpdated.nearby=new Date})})}getStateOptions(){let t=sessionStorage.getItem("states");t?this.stateOptions=JSON.parse(t):Object(A.j)().then(t=>t.json()).then(t=>{t.forEach(t=>{this.stateOptions.push({label:t.state,value:t.code})}),sessionStorage.setItem("states",JSON.stringify(this.stateOptions))}).catch(t=>{console.log(t)})}getCountyOptions(){let t=sessionStorage.getItem("counties");t?this.countyOptions=JSON.parse(t):Object(A.b)().then(t=>t.json()).then(t=>{t.forEach(t=>{this.countyOptions.push({label:t.county,value:t.code})}),sessionStorage.setItem("counties",JSON.stringify(this.countyOptions))}).catch(t=>{console.log(t)})}getCounties(t){this.filteredCounties=this.countyOptions.filter(e=>e.value.startsWith(t))}get stateSightingsHeader(){return`Notable ${this.stateLabel} Sightings for the past 3 days`}get nearbySightingsHeader(){return"Nearby Sightings for the past 7 days"}get countySightingsHeader(){return`Notable ${this.countyLabel}, ${this.stateLabel} Sightings for the past 7 days`}handleSightingsSelected(t){this.selectedSightings=t.detail;const e=this.template.querySelector("my-sightings-details");e.lat=void 0,e.lon=void 0}handleSightingsChange(t){this.template.querySelector(".list-select").classList.remove("slds-is-open");this.setting.view=t.currentTarget.dataset.id,this.selectedSightings=void 0,this.setting.filter={nearby:"all",local:"notable",state:"notable",county:"notable"}[this.setting.view],this.dropdown={nearby:"Nearby",local:"Local",state:"State",county:"County"}[this.setting.view]}get sightings(){return this[this.setting.view+"Sightings"]}get sightingsHeader(){return this[this.setting.view+"SightingsHeader"]}get nearbyDisabled(){return!navigator.geolocation}get filterOptions(){return{nearby:[{label:"Rare",value:"rare"},{label:"All",value:"all"}],local:[{label:"Rare",value:"rare"},{label:"Notable",value:"notable"}],state:[{label:"Rare",value:"rare"},{label:"Notable",value:"notable"}],county:[{label:"Rare",value:"rare"},{label:"Notable",value:"notable"}]}[this.setting.view]}get stateSelectDisabled(){return"state"!==this.setting.view&&"county"!==this.setting.view}get countySelectDisabled(){return"county"!==this.setting.view}handleApplyClick(){const t=this.template.querySelector(".category").value;this.setting.filter=t;const e=this.template.querySelector(".state").value;e!==this.setting.state&&(this.setting.state=e,this.handleSelectedStateChange(),this.selectedSightings=void 0);const s=this.template.querySelector(".county").value;this.setting.county!==s&&(this.setting.county=s,this.handleSelectedCountyChange(),this.selectedSightings=void 0,console.log(this.sightings[0])),this.showFilterModal=!1}handleSelectedStateChange(){this.stateLabel=this.stateOptions.find(t=>t.value===this.setting.state).label,this.getStateNotableSightings()}handleSelectedCountyChange(){this.countyLabel=this.countyOptions.find(t=>t.value===this.setting.county).label,this.getCountyNotableSightings()}handleStateChange(t){this.getCounties(t.detail.value),this.template.querySelector(".county").value=this.filteredCounties[0].value}handleListClick(){let t=this.template.querySelector(".list-select").classList;t.contains("slds-is-open")?t.remove("slds-is-open"):t.add("slds-is-open")}handleFilterClick(){this.getCounties(this.setting.state),this.showFilterModal=!0}handleFilterModalCancelClick(){this.showFilterModal=!1}get numSightings(){const t=this.template.querySelector("my-sightings");return null===t?0:t.numSightings}get lastUpdatedDate(){return this.lastUpdated[this.setting.view]}}Object(i.registerDecorators)(D,{fields:["localSightings","stateSightings","nearbySightings","countySightings","selectedSightings","stateOptions","stateLabel","countyLabel","dropdown","showFilterModal","countyOptions","setting","filteredCounties","lastUpdated"]});e.default=Object(i.registerComponent)(D,{tmpl:j})}}]);